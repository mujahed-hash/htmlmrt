"use strict";(self.webpackChunkhmfront=self.webpackChunkhmfront||[]).push([[2958],{2958:(_,a,o)=>{o.r(a),o.d(a,{OrdersModule:()=>O});var s=o(6814),d=o(3403),t=o(5879),h=o(2048);const m=["loadingIndicator"],g=function(n){return["/admin/order/view",n]};function p(n,l){if(1&n&&(t.TgZ(0,"div",5)(1,"div",6),t._UZ(2,"img",7),t.TgZ(3,"div",8)(4,"p"),t._uU(5),t._UZ(6,"br"),t._uU(7),t.ALo(8,"currency"),t._UZ(9,"br"),t._uU(10),t._UZ(11,"br"),t._uU(12),t._UZ(13,"br"),t.qZA()()()()),2&n){const e=l.$implicit;t.xp6(1),t.Q6J("routerLink",t.VKq(10,g,e._id)),t.xp6(1),t.s9C("alt",null==e.orderItems[0]||null==e.orderItems[0].product?null:e.orderItems[0].product.prodName),t.Q6J("src",null==e.orderItems[0]||null==e.orderItems[0].product?null:e.orderItems[0].product.images[0],t.LSH),t.xp6(3),t.hij(" Order ID: ",e._id,""),t.xp6(2),t.hij(" Total Price: ",t.xi3(8,7,e.totalPrice,"INR"),""),t.xp6(3),t.hij(" Status: ",e.status,""),t.xp6(2),t.hij(" Placed by: ",(null==e.user?null:e.user.name)||"Unknown","")}}function u(n,l){if(1&n){const e=t.EpF();t.TgZ(0,"button",11,12),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.loadOrders())}),t._uU(2),t.qZA()}if(2&n){const e=t.oxw(2);t.Q6J("disabled",e.isLoading),t.xp6(2),t.hij(" ",e.orders.length?"Load More":"No more orders"," ")}}function x(n,l){if(1&n&&(t.TgZ(0,"div",9),t.YNc(1,u,3,2,"button",10),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.hasMoreOrders&&!e.isLoading)}}const f=[{path:"allorders",component:(()=>{class n{constructor(e,i){this.adminService=e,this.el=i,this.orders=[],this.start=0,this.limit=20,this.isLoading=!1,this.hasMoreOrders=!0}ngOnInit(){this.token=localStorage.getItem("token"),this.loadOrders()}ngAfterViewInit(){this.initIntersectionObserver(),this.checkContentHeight()}loadOrders(){this.isLoading||!this.hasMoreOrders||(this.isLoading=!0,this.adminService.getOrdersAll(this.start,this.limit,this.token).subscribe(e=>{this.isLoading=!1,console.log(e),e&&Array.isArray(e.orders)?(this.orders=[...this.orders,...e.orders],this.start+=this.limit,this.checkContentHeight(),this.hasMoreOrders=e.orders.length===this.limit):(console.error("Unexpected response structure:",e),this.checkContentHeight())},e=>{this.isLoading=!1,console.error("Error loading orders:",e)}))}checkContentHeight(){const e=this.el.nativeElement.querySelector(".items");if(e){const r=window.innerHeight;this.hasMoreOrders=e.offsetHeight<r}else console.error('Element with class ".items" not found.'),this.hasMoreOrders=!1}onResize(){this.checkContentHeight()}initIntersectionObserver(){const e=new IntersectionObserver(i=>{i[0].isIntersecting&&this.hasMoreOrders&&!this.isLoading&&this.loadOrders()},{rootMargin:"100px"});this.loadingIndicator&&e.observe(this.loadingIndicator.nativeElement)}getAllOrders(){}static#t=this.\u0275fac=function(i){return new(i||n)(t.Y36(h.l),t.Y36(t.SBq))};static#e=this.\u0275cmp=t.Xpm({type:n,selectors:[["app-allorders"]],viewQuery:function(i,r){if(1&i&&t.Gf(m,5),2&i){let c;t.iGM(c=t.CRH())&&(r.loadingIndicator=c.first)}},hostBindings:function(i,r){1&i&&t.NdJ("resize",function(){return r.onResize()},!1,t.Jf7)},decls:6,vars:2,consts:[[1,"hh"],[2,"background-color","#EBF4F6","color","#2657C1","width","max-content","padding","4px 8px"],[1,"items"],["class","item",4,"ngFor","ngForOf"],["class","itm-btn",4,"ngIf"],[1,"item"],["routerLinkActive","router-link-active",2,"width","80%","display","flex","margin-bottom","1rem","box-shadow","rgba(50, 50, 93, 0.25) 0px 6px 12px -2px, rgba(0, 0, 0, 0.3) 0px 3px 7px -3px","overflow","hidden","border-radius","5px",3,"routerLink"],[3,"src","alt"],[1,"itemName"],[1,"itm-btn"],["style","",3,"disabled","click",4,"ngIf"],[3,"disabled","click"],["loadingIndicator",""]],template:function(i,r){1&i&&(t.TgZ(0,"div",0)(1,"p",1),t._uU(2," Orders placed by customers "),t.qZA(),t.TgZ(3,"div",2),t.YNc(4,p,14,12,"div",3),t.qZA(),t.YNc(5,x,2,1,"div",4),t.qZA()),2&i&&(t.xp6(4),t.Q6J("ngForOf",r.orders),t.xp6(1),t.Q6J("ngIf",0!=r.orders.length))},dependencies:[s.sg,s.O5,d.rH,d.Od,s.H9],styles:["img[_ngcontent-%COMP%]{width:5rem;height:5rem;max-height:5rem;margin-right:.7rem}.hh[_ngcontent-%COMP%]{height:100%}.items[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;width:100%}.item[_ngcontent-%COMP%]{width:30%;display:inline-block;margin:0 0%;box-sizing:border-box;padding:8px;border-radius:5px}.itemName[_ngcontent-%COMP%]{font-size:1.2em;margin-bottom:10px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.itemName[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px 0 0;margin-bottom:4PX}img[_ngcontent-%COMP%]{max-width:100%;height:auto}.itm-btn[_ngcontent-%COMP%]{width:100%;text-align:center;margin-bottom:3rem}.itm-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:max-content;padding:5px;position:relative;right:8rem;font-size:large;background-color:#000;color:#fff;border:none;border-radius:5px;box-shadow:#32325d40 0 6px 12px -2px,#0000004d 0 3px 7px -3px}@media (max-width: 1024px){.item[_ngcontent-%COMP%]{width:45%;margin:0 2.5%}}@media (max-width: 768px){.item[_ngcontent-%COMP%]{width:100%;margin:0 0 20px}}@media screen and (orientation: portrait){.items[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;width:100%}.item[_ngcontent-%COMP%]{width:50%;display:inline-block;margin:0 0%;box-sizing:border-box;padding:6px;border-radius:5px;font-size:small}img[_ngcontent-%COMP%]{max-width:80%;height:4rem}.itm-btn[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;right:0rem;text-align:center;margin-bottom:3rem}.itm-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:80%;right:0rem}}"]})}return n})()}];let b=(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[d.Bz.forChild(f),d.Bz]})}return n})(),O=(()=>{class n{static#t=this.\u0275fac=function(i){return new(i||n)};static#e=this.\u0275mod=t.oAB({type:n});static#n=this.\u0275inj=t.cJS({imports:[s.ez,b]})}return n})()}}]);